{% extends "layout.html" %}
{% block title %}Campaigns - CounterSignal IPI{% endblock %}
{% block content %}
<div class="page-header">
  <h2>Campaigns</h2>
  <p>{{ campaigns|length }} payload documents generated</p>
</div>

<div class="card">
  {% if campaigns %}
  <table>
    <thead>
      <tr>
        <th>UUID</th>
        <th>Filename</th>
        <th>Format</th>
        <th>Technique</th>
        <th>Style</th>
        <th>Type</th>
        <th>Hits</th>
        <th>Created</th>
      </tr>
    </thead>
    <tbody>
    {% for c in campaigns %}
      <tr>
        <td><a href="/ui/campaigns/{{ c.uuid }}" class="mono">{{ c.uuid[:8] }}...</a></td>
        <td class="truncate">{{ c.filename }}</td>
        <td><span class="badge badge-format">{{ c.format }}</span></td>
        <td><span class="badge badge-technique">{{ c.technique.value }}</span></td>
        <td class="text-muted text-sm">{{ c.payload_style.value }}</td>
        <td class="text-muted text-sm">{{ c.payload_type.value }}</td>
        <td class="mono">{{ hit_counts.get(c.uuid, 0) }}</td>
        <td class="text-dim text-sm">{{ c.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
  {% else %}
  <div class="empty">
    <p>No campaigns yet. Generate payloads from the CLI or the Generate page.</p>
  </div>
  {% endif %}
</div>
{% endblock %}
